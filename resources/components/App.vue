<template>
  <main>
    <div class="wrapper">
      <div class="wrapper-left" v-if="showMenu">
        <div class="sidebar">
          <div class="sidebar-head">
            <a href="">
              <img src="images/logo.svg" alt="" />
            </a>
          </div>
          <div class="sidebar-nav">
            <ul>
              <li>
                <router-link
                  exact-active-class="active"
                  to="/dashboard"
                  class="nav-item"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="25"
                    height="22"
                    viewBox="0 0 18 20"
                    fill="none"
                  >
                    <path
                      d="M12.5324 12.8555C13.0479 12.5708 13.6381 12.4088 14.2666 12.4088H14.2687C14.3326 12.4088 14.3625 12.3299 14.3156 12.2861C13.662 11.6832 12.9154 11.1963 12.1063 10.8453C12.0978 10.8409 12.0892 10.8387 12.0807 10.8343C13.4037 9.84671 14.2645 8.24161 14.2645 6.43066C14.2645 3.43066 11.9039 1 8.9915 1C6.07913 1 3.72068 3.43066 3.72068 6.43066C3.72068 8.24161 4.5814 9.84671 5.90656 10.8343C5.89804 10.8387 5.88952 10.8409 5.881 10.8453C4.92867 11.2591 4.07434 11.8526 3.33933 12.6102C2.60855 13.36 2.02676 14.2488 1.62642 15.227C1.23252 16.185 1.01993 17.2113 1.00005 18.2511C0.999485 18.2745 1.00347 18.2977 1.01178 18.3195C1.02009 18.3412 1.03256 18.3611 1.04844 18.3778C1.06433 18.3945 1.08331 18.4078 1.10427 18.4169C1.12523 18.426 1.14775 18.4307 1.17049 18.4307H2.44665C2.53826 18.4307 2.61496 18.354 2.61709 18.2599C2.6597 16.5693 3.31802 14.9861 4.4834 13.7861C5.68712 12.5445 7.28925 11.8613 8.99364 11.8613C10.2016 11.8613 11.3606 12.2051 12.3598 12.8489C12.3855 12.8655 12.4149 12.8748 12.4452 12.876C12.4755 12.8771 12.5056 12.8701 12.5324 12.8555ZM8.99364 10.1971C8.01787 10.1971 7.09963 9.80511 6.40723 9.09343C6.06655 8.74418 5.79647 8.3291 5.61255 7.8721C5.42863 7.4151 5.33451 6.92521 5.33559 6.43066C5.33559 5.42555 5.71695 4.47956 6.40723 3.76788C7.0975 3.0562 8.01574 2.66423 8.99364 2.66423C9.97153 2.66423 10.8876 3.0562 11.58 3.76788C11.9207 4.11713 12.1908 4.53221 12.3747 4.98921C12.5586 5.44621 12.6528 5.9361 12.6517 6.43066C12.6517 7.43577 12.2703 8.38175 11.58 9.09343C10.8876 9.80511 9.9694 10.1971 8.99364 10.1971ZM16.8296 15.4088H15.04V13.5693C15.04 13.473 14.9633 13.3942 14.8695 13.3942H13.6764C13.5827 13.3942 13.506 13.473 13.506 13.5693V15.4088H11.7164C11.6227 15.4088 11.546 15.4876 11.546 15.5839V16.8102C11.546 16.9066 11.6227 16.9854 11.7164 16.9854H13.506V18.8248C13.506 18.9212 13.5827 19 13.6764 19H14.8695C14.9633 19 15.04 18.9212 15.04 18.8248V16.9854H16.8296C16.9233 16.9854 17 16.9066 17 16.8102V15.5839C17 15.4876 16.9233 15.4088 16.8296 15.4088Z"
                      fill="#ffffffcc"
                      stroke="#ffffffcc"
                      stroke-width="0.6"
                    />
                  </svg>
                  Dashboard</router-link
                >
              </li>
              <li>
                <router-link
                  exact-active-class="active"
                  to="/client"
                  class="nav-item"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="25"
                    height="22"
                    viewBox="0 0 18 20"
                    fill="none"
                  >
                    <path
                      d="M12.5324 12.8555C13.0479 12.5708 13.6381 12.4088 14.2666 12.4088H14.2687C14.3326 12.4088 14.3625 12.3299 14.3156 12.2861C13.662 11.6832 12.9154 11.1963 12.1063 10.8453C12.0978 10.8409 12.0892 10.8387 12.0807 10.8343C13.4037 9.84671 14.2645 8.24161 14.2645 6.43066C14.2645 3.43066 11.9039 1 8.9915 1C6.07913 1 3.72068 3.43066 3.72068 6.43066C3.72068 8.24161 4.5814 9.84671 5.90656 10.8343C5.89804 10.8387 5.88952 10.8409 5.881 10.8453C4.92867 11.2591 4.07434 11.8526 3.33933 12.6102C2.60855 13.36 2.02676 14.2488 1.62642 15.227C1.23252 16.185 1.01993 17.2113 1.00005 18.2511C0.999485 18.2745 1.00347 18.2977 1.01178 18.3195C1.02009 18.3412 1.03256 18.3611 1.04844 18.3778C1.06433 18.3945 1.08331 18.4078 1.10427 18.4169C1.12523 18.426 1.14775 18.4307 1.17049 18.4307H2.44665C2.53826 18.4307 2.61496 18.354 2.61709 18.2599C2.6597 16.5693 3.31802 14.9861 4.4834 13.7861C5.68712 12.5445 7.28925 11.8613 8.99364 11.8613C10.2016 11.8613 11.3606 12.2051 12.3598 12.8489C12.3855 12.8655 12.4149 12.8748 12.4452 12.876C12.4755 12.8771 12.5056 12.8701 12.5324 12.8555ZM8.99364 10.1971C8.01787 10.1971 7.09963 9.80511 6.40723 9.09343C6.06655 8.74418 5.79647 8.3291 5.61255 7.8721C5.42863 7.4151 5.33451 6.92521 5.33559 6.43066C5.33559 5.42555 5.71695 4.47956 6.40723 3.76788C7.0975 3.0562 8.01574 2.66423 8.99364 2.66423C9.97153 2.66423 10.8876 3.0562 11.58 3.76788C11.9207 4.11713 12.1908 4.53221 12.3747 4.98921C12.5586 5.44621 12.6528 5.9361 12.6517 6.43066C12.6517 7.43577 12.2703 8.38175 11.58 9.09343C10.8876 9.80511 9.9694 10.1971 8.99364 10.1971ZM16.8296 15.4088H15.04V13.5693C15.04 13.473 14.9633 13.3942 14.8695 13.3942H13.6764C13.5827 13.3942 13.506 13.473 13.506 13.5693V15.4088H11.7164C11.6227 15.4088 11.546 15.4876 11.546 15.5839V16.8102C11.546 16.9066 11.6227 16.9854 11.7164 16.9854H13.506V18.8248C13.506 18.9212 13.5827 19 13.6764 19H14.8695C14.9633 19 15.04 18.9212 15.04 18.8248V16.9854H16.8296C16.9233 16.9854 17 16.9066 17 16.8102V15.5839C17 15.4876 16.9233 15.4088 16.8296 15.4088Z"
                      fill="#ffffffcc"
                      stroke="#ffffffcc"
                      stroke-width="0.6"
                    />
                  </svg>
                  Clients</router-link
                >
              </li>
              <li>
                <router-link
                  exact-active-class="active"
                  to="/invoice"
                  class="nav-item"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="25"
                    height="22"
                    viewBox="0 0 18 20"
                    fill="none"
                  >
                    <path
                      d="M12.5324 12.8555C13.0479 12.5708 13.6381 12.4088 14.2666 12.4088H14.2687C14.3326 12.4088 14.3625 12.3299 14.3156 12.2861C13.662 11.6832 12.9154 11.1963 12.1063 10.8453C12.0978 10.8409 12.0892 10.8387 12.0807 10.8343C13.4037 9.84671 14.2645 8.24161 14.2645 6.43066C14.2645 3.43066 11.9039 1 8.9915 1C6.07913 1 3.72068 3.43066 3.72068 6.43066C3.72068 8.24161 4.5814 9.84671 5.90656 10.8343C5.89804 10.8387 5.88952 10.8409 5.881 10.8453C4.92867 11.2591 4.07434 11.8526 3.33933 12.6102C2.60855 13.36 2.02676 14.2488 1.62642 15.227C1.23252 16.185 1.01993 17.2113 1.00005 18.2511C0.999485 18.2745 1.00347 18.2977 1.01178 18.3195C1.02009 18.3412 1.03256 18.3611 1.04844 18.3778C1.06433 18.3945 1.08331 18.4078 1.10427 18.4169C1.12523 18.426 1.14775 18.4307 1.17049 18.4307H2.44665C2.53826 18.4307 2.61496 18.354 2.61709 18.2599C2.6597 16.5693 3.31802 14.9861 4.4834 13.7861C5.68712 12.5445 7.28925 11.8613 8.99364 11.8613C10.2016 11.8613 11.3606 12.2051 12.3598 12.8489C12.3855 12.8655 12.4149 12.8748 12.4452 12.876C12.4755 12.8771 12.5056 12.8701 12.5324 12.8555ZM8.99364 10.1971C8.01787 10.1971 7.09963 9.80511 6.40723 9.09343C6.06655 8.74418 5.79647 8.3291 5.61255 7.8721C5.42863 7.4151 5.33451 6.92521 5.33559 6.43066C5.33559 5.42555 5.71695 4.47956 6.40723 3.76788C7.0975 3.0562 8.01574 2.66423 8.99364 2.66423C9.97153 2.66423 10.8876 3.0562 11.58 3.76788C11.9207 4.11713 12.1908 4.53221 12.3747 4.98921C12.5586 5.44621 12.6528 5.9361 12.6517 6.43066C12.6517 7.43577 12.2703 8.38175 11.58 9.09343C10.8876 9.80511 9.9694 10.1971 8.99364 10.1971ZM16.8296 15.4088H15.04V13.5693C15.04 13.473 14.9633 13.3942 14.8695 13.3942H13.6764C13.5827 13.3942 13.506 13.473 13.506 13.5693V15.4088H11.7164C11.6227 15.4088 11.546 15.4876 11.546 15.5839V16.8102C11.546 16.9066 11.6227 16.9854 11.7164 16.9854H13.506V18.8248C13.506 18.9212 13.5827 19 13.6764 19H14.8695C14.9633 19 15.04 18.9212 15.04 18.8248V16.9854H16.8296C16.9233 16.9854 17 16.9066 17 16.8102V15.5839C17 15.4876 16.9233 15.4088 16.8296 15.4088Z"
                      fill="#ffffffcc"
                      stroke="#ffffffcc"
                      stroke-width="0.6"
                    />
                  </svg>
                  Invoice</router-link
                >
              </li>
              <li>
                <router-link
                  exact-active-class="active"
                  to="/setting"
                  class="nav-item"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="25"
                    height="22"
                    viewBox="0 0 18 20"
                    fill="none"
                  >
                    <path
                      d="M12.5324 12.8555C13.0479 12.5708 13.6381 12.4088 14.2666 12.4088H14.2687C14.3326 12.4088 14.3625 12.3299 14.3156 12.2861C13.662 11.6832 12.9154 11.1963 12.1063 10.8453C12.0978 10.8409 12.0892 10.8387 12.0807 10.8343C13.4037 9.84671 14.2645 8.24161 14.2645 6.43066C14.2645 3.43066 11.9039 1 8.9915 1C6.07913 1 3.72068 3.43066 3.72068 6.43066C3.72068 8.24161 4.5814 9.84671 5.90656 10.8343C5.89804 10.8387 5.88952 10.8409 5.881 10.8453C4.92867 11.2591 4.07434 11.8526 3.33933 12.6102C2.60855 13.36 2.02676 14.2488 1.62642 15.227C1.23252 16.185 1.01993 17.2113 1.00005 18.2511C0.999485 18.2745 1.00347 18.2977 1.01178 18.3195C1.02009 18.3412 1.03256 18.3611 1.04844 18.3778C1.06433 18.3945 1.08331 18.4078 1.10427 18.4169C1.12523 18.426 1.14775 18.4307 1.17049 18.4307H2.44665C2.53826 18.4307 2.61496 18.354 2.61709 18.2599C2.6597 16.5693 3.31802 14.9861 4.4834 13.7861C5.68712 12.5445 7.28925 11.8613 8.99364 11.8613C10.2016 11.8613 11.3606 12.2051 12.3598 12.8489C12.3855 12.8655 12.4149 12.8748 12.4452 12.876C12.4755 12.8771 12.5056 12.8701 12.5324 12.8555ZM8.99364 10.1971C8.01787 10.1971 7.09963 9.80511 6.40723 9.09343C6.06655 8.74418 5.79647 8.3291 5.61255 7.8721C5.42863 7.4151 5.33451 6.92521 5.33559 6.43066C5.33559 5.42555 5.71695 4.47956 6.40723 3.76788C7.0975 3.0562 8.01574 2.66423 8.99364 2.66423C9.97153 2.66423 10.8876 3.0562 11.58 3.76788C11.9207 4.11713 12.1908 4.53221 12.3747 4.98921C12.5586 5.44621 12.6528 5.9361 12.6517 6.43066C12.6517 7.43577 12.2703 8.38175 11.58 9.09343C10.8876 9.80511 9.9694 10.1971 8.99364 10.1971ZM16.8296 15.4088H15.04V13.5693C15.04 13.473 14.9633 13.3942 14.8695 13.3942H13.6764C13.5827 13.3942 13.506 13.473 13.506 13.5693V15.4088H11.7164C11.6227 15.4088 11.546 15.4876 11.546 15.5839V16.8102C11.546 16.9066 11.6227 16.9854 11.7164 16.9854H13.506V18.8248C13.506 18.9212 13.5827 19 13.6764 19H14.8695C14.9633 19 15.04 18.9212 15.04 18.8248V16.9854H16.8296C16.9233 16.9854 17 16.9066 17 16.8102V15.5839C17 15.4876 16.9233 15.4088 16.8296 15.4088Z"
                      fill="#ffffffcc"
                      stroke="#ffffffcc"
                      stroke-width="0.6"
                    />
                  </svg>
                  Settings</router-link
                >
              </li>
            </ul>
            <div class="login-btn">
              <button class="btn" @click.prevent="logout">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="22"
                  height="19"
                  viewBox="0 0 22 19"
                  fill="none"
                >
                  <path
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                    d="M2.79413 16.114V2.7373H10.8677V5.82683C10.8677 6.30597 11.2559 6.69669 11.732 6.69669C12.2089 6.69669 12.5971 6.30597 12.5971 5.82683V3C12.5971 1.89543 11.7017 1 10.5971 1H3.03515C1.93058 1 1.03516 1.89543 1.03516 3V15.8827C1.03516 16.9872 1.93059 17.8827 3.03516 17.8827H10.5971C11.7017 17.8827 12.5971 16.9872 12.5971 15.8827V13.0245C12.5971 12.5445 12.2089 12.1538 11.732 12.1538C11.2559 12.1538 10.8677 12.5445 10.8677 13.0245V16.1132H10.8381L2.79413 16.114Z"
                    fill="#ffffffcc"
                    stroke="#ffffffcc"
                    stroke-width="0.5"
                  />
                  <path
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                    d="M15.4151 6.66026L17.5264 8.61303H8.27215C7.77529 8.61303 7.37109 8.98686 7.37109 9.44591C7.37109 9.90415 7.77529 10.2788 8.27215 10.2788H17.5879L15.475 12.2323C15.1036 12.5756 15.1036 13.0926 15.475 13.4085C15.8473 13.7526 16.4064 13.7526 16.7475 13.4085L21.0339 9.44591L16.7475 5.48251C16.3684 5.13897 15.7927 5.13897 15.4135 5.48251C15.0405 5.82739 15.0421 6.34432 15.4151 6.66026Z"
                    fill="#ffffffcc"
                    stroke="#ffffffcc"
                    stroke-width="0.5"
                  />
                </svg>
                Logout
              </button>
            </div>
          </div>
        </div>
      </div>
      <div class="wrapper-right">
        <nav class="navbar navbar-expand-lg" v-if="showMenu">
          <!-- <router-link to="/" class="navbar-brand" href="#"><img class="logo" src="nextige-logo.png" alt=""></router-link> -->
          <div class="container-fluid">
            <div class="navbar-inr">
              <div class="current-user">
                <div>
                  <h4>
                  <div v-if="this.profile == ''">
                    <span class="c-user-icon">
                      {{
                        name.split(" ")[0][0] +
                        (name.split(" ")[1]
                          ? name.split(" ")[1][0].toUpperCase()
                          : " ")
                      }}
                    </span>
                  </div>
                  <div v-else>
                      <img
                        class="c-user-icon"
                        v-bind:src="'/images/' + this.profile"
                      />
                  </div>
                  </h4>
                </div>
                <div class="user-name">
                  <h5>{{ name }}</h5>
                  <span>{{ title }}</span>
                </div>
                <span class="arrow-ico">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="13.992"
                    height="8"
                    viewBox="0 0 13.992 8"
                  >
                    <path
                      class="a"
                      d="M13.186,16.835l5.291-5.295a1,1,0,0,1,1.412,0,1.008,1.008,0,0,1,0,1.416l-5.995,6a1,1,0,0,1-1.379.029L6.479,12.961a1,1,0,0,1,1.412-1.416Z"
                      transform="translate(-6.188 -11.246)"
                    />
                  </svg>
                </span>
              </div>
            </div>
          </div>
        </nav>
        <div class="main-wrapeer">
          <router-view></router-view>
        </div>
      </div>
    </div>
  </main>
</template>
<script>
export default {
  data() {
    return {
      name: "",
      title: "",
      profile: "",
    };
  },
  mounted() {
    this.showUser();
  },
  computed: {
    showMenu() {
      return (
        this.$route.name !== "login" &&
        this.$route.name !== "register" &&
        this.$route.name !== "generate_invoice"
      );
    },
  },
  methods: {
    logout() {
      axios.post("/api/logout").then(() => {
        localStorage.clear();
        this.$router.push({ name: "login" });
      });
    },
    async showUser() {
      await this.axios
        .get(`/api/login/${localStorage.getItem("token")}`)
        .then((response) => {
          const { name, title, profile } = response.data.user_data;
          this.name = name.charAt(0).toUpperCase() + name.slice(1);
          this.title = title;
          this.profile = profile;
          // console.log(this.profile);
        })
        .catch((error) => {
          console.log(error);
        });
    },
  },
};
</script>
<style scoped>
.logo {
  width: 150px;
}
</style>
