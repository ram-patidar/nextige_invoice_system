(self.webpackChunk=self.webpackChunk||[]).push([[151],{9234:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(3645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,".back[data-v-3d5631ac]{margin:-94px 0 0 1004px;position:inherit;text-align:right}",""]);const s=i},1151:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>v});var r=n(7757),i=n.n(r);function s(e,t,n,r,i,s,a){try{var o=e[s](a),c=o.value}catch(e){return void n(e)}o.done?t(c):Promise.resolve(c).then(r,i)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){s(a,r,i,o,c,"next",e)}function c(e){s(a,r,i,o,c,"throw",e)}o(void 0)}))}}const o={name:"add-Invoice",data:function(){return{Invoice:{client_id:"",description:"",amount:""},users:[{client_id:"",description:"",rate:"",amount:"",qty:1}],Client:{invoice_code:"",client_id:"",client_name:"",date:null},errors:[],Clients:[],a_checked:"",h_checked:"",type:""}},mounted:function(){this.getClients(),this.date_function(),this.a_checked=!0,this.type="hidden"},methods:{create:function(){var e=this;return a(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.Invoice.client_id=e.users.client_id,console.log(JSON.stringify(e.users)),t.next=4,e.axios.post("/api/Invoice",{my_prop_name:JSON.stringify(e.inputs)}).then((function(t){e.errors=error.response.data.errors})).catch((function(t){console.log(t),e.errors=t.response.data.errors}));case 4:case"end":return t.stop()}}),t)})))()},date_function:function(){var e=new Date,t=e.getDate()+"/"+e.getMonth()+"/"+e.getFullYear();this.Client.date=t},getClients:function(){var e=this;return a(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.axios.get("/api/Client").then((function(t){e.Clients=t.data.Clients})).catch((function(t){console.log(t),e.Clients=[]}));case 2:case"end":return t.stop()}}),t)})))()},SelectClient:function(e){var t=this;return a(i().mark((function n(){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.axios.get("/api/Client/".concat(e.target.value)).then((function(e){var n=e.data,r=n.invoice_code,i=n.id,s=n.client_name;t.Client.invoice_code=r,t.users.client_id=i,t.Client.client_name=s})).catch((function(e){console.log(e),console.log(e.response.data)}));case 2:case"end":return n.stop()}}),n)})))()},addRow:function(){this.users.push({description:"",client_id:"",qty:"",rate:""})},deleteRow:function(e){this.users.splice(e,1)},Amount:function(){this.a_checked=!0,this.h_checked=!1,this.type="hidden"},Hours:function(){this.a_checked=!1,this.h_checked=!0,this.type="number"}}};var c=n(3379),l=n.n(c),u=n(9234),d={insert:"head",singleton:!1};l()(u.Z,d);u.Z.locals;const v=(0,n(1900).Z)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"row"},[n("div",{staticClass:"col-12"},[n("div",{staticClass:"card"},[n("div",{staticClass:"card-header"},[n("div",[n("router-link",{staticClass:"btn btn-primary back",attrs:{to:{name:"invoicelist"}}},[e._v("← Back")])],1),e._v(" "),n("h4",[e._v("Add Invoice")]),e._v(" "),e.errors.msg?n("span",{staticClass:"error"},[e._v(e._s(e.errors.msg[0]))]):e._e()]),e._v(" "),n("div",{staticClass:"card-body"},[n("form",[n("div",{staticClass:"row"},[n("div",{staticClass:"col-8"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-12 mb-2"},[n("div",{staticClass:"form-group"},[n("label",[e._v("Select Client")]),e._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:e.Invoice.client_id,expression:"Invoice.client_id"}],staticClass:"form-control",attrs:{name:"client_id",id:"client_id"},on:{change:[function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.Invoice,"client_id",t.target.multiple?n:n[0])},function(t){return e.SelectClient(t)}]}},[n("option",{attrs:{value:""}},[e._v("Select Client Name")]),e._v(" "),e._l(e.Clients,(function(t,r){return n("option",{key:r,domProps:{value:t.id}},[e._v("\n                        "+e._s(t.client_name)+"\n                      ")])}))],2),e._v(" "),e.errors.client_id?n("span",{staticClass:"error"},[e._v(e._s(e.errors.client_id[0]))]):e._e()])]),e._v(" "),e._l(e.users,(function(t,r){return n("div",{key:r},[n("input",{attrs:{type:"radio",name:"rate",value:"Amount"},domProps:{checked:e.a_checked},on:{change:e.Amount}}),e._v(" "),n("label",{attrs:{for:"rate"}},[e._v("Amount")]),e._v(" "),n("input",{attrs:{type:"radio",name:"rate",value:"Hours"},domProps:{checked:e.h_checked},on:{change:e.Hours}}),e._v(" "),n("label",{attrs:{for:"rate"}},[e._v("Hours")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.users.client_id,expression:"users.client_id"}],attrs:{type:"hidden",name:"client_id"},domProps:{value:e.users.client_id},on:{input:function(t){t.target.composing||e.$set(e.users,"client_id",t.target.value)}}}),e._v(" "),n("td",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.description,expression:"user.description"}],staticClass:"form-control",attrs:{name:"description",placeholder:"Enter item",type:"text"},domProps:{value:t.description},on:{input:function(n){n.target.composing||e.$set(t,"description",n.target.value)}}})]),e._v(" "),e.errors.description?n("span",{staticClass:"error"},[e._v(e._s(e.errors.description[0]))]):e._e(),e._v(" "),n("td",["checkbox"===e.type?n("input",{directives:[{name:"model",rawName:"v-model",value:t.qty,expression:"user.qty"}],staticClass:"form-control",attrs:{name:"qty",placeholder:"Enter hours",type:"checkbox"},domProps:{checked:Array.isArray(t.qty)?e._i(t.qty,null)>-1:t.qty},on:{change:function(n){var r=t.qty,i=n.target,s=!!i.checked;if(Array.isArray(r)){var a=e._i(r,null);i.checked?a<0&&e.$set(t,"qty",r.concat([null])):a>-1&&e.$set(t,"qty",r.slice(0,a).concat(r.slice(a+1)))}else e.$set(t,"qty",s)}}}):"radio"===e.type?n("input",{directives:[{name:"model",rawName:"v-model",value:t.qty,expression:"user.qty"}],staticClass:"form-control",attrs:{name:"qty",placeholder:"Enter hours",type:"radio"},domProps:{checked:e._q(t.qty,null)},on:{change:function(n){return e.$set(t,"qty",null)}}}):n("input",{directives:[{name:"model",rawName:"v-model",value:t.qty,expression:"user.qty"}],staticClass:"form-control",attrs:{name:"qty",placeholder:"Enter hours",type:e.type},domProps:{value:t.qty},on:{input:function(n){n.target.composing||e.$set(t,"qty",n.target.value)}}})]),e._v(" "),n("td",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.rate,expression:"user.rate"}],staticClass:"form-control",attrs:{name:"amount",placeholder:"Enter price rate",type:"number"},domProps:{value:t.rate},on:{input:function(n){n.target.composing||e.$set(t,"rate",n.target.value)}}})]),e._v(" "),e.errors.amount?n("span",{staticClass:"error"},[e._v(e._s(e.errors.amount[0]))]):e._e(),e._v(" "),n("td",[n("button",{staticClass:"btn btn-danger",on:{click:function(t){return t.preventDefault(),e.deleteRow(r)}}},[e._v("\n                      Drop\n                    ")])])])})),e._v(" "),n("div",{staticClass:"col-12"},[n("button",{staticClass:"btn btn-primary",on:{click:function(t){return t.preventDefault(),e.addRow.apply(null,arguments)}}},[e._v("\n                    Add new item\n                  ")])])],2)]),e._v(" "),n("div",{staticClass:"col-4"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-12 mb-2"},[n("div",{staticClass:"form-group"},[n("label",[e._v("Invoice #")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.Client.invoice_code,expression:"Client.invoice_code"}],staticClass:"form-control",attrs:{type:"text",name:"invoice_code",disabled:""},domProps:{value:e.Client.invoice_code},on:{input:function(t){t.target.composing||e.$set(e.Client,"invoice_code",t.target.value)}}})])]),e._v(" "),n("div",{staticClass:"col-12 mb-2"},[n("div",{staticClass:"form-group"},[n("label",[e._v("date")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.Client.date,expression:"Client.date"}],staticClass:"form-control",attrs:{type:"text",disabled:""},domProps:{value:e.Client.date},on:{input:function(t){t.target.composing||e.$set(e.Client,"date",t.target.value)}}})]),e._v(" "),n("div",{staticClass:"form-group"},[n("label",[e._v("Subtotal")]),e._v(" "),n("div",[n("b",[e._v("$\n                        "+e._s(e.users.rate?e.users.qty?e.users.qty*e.users.rate:e.users.rate:"00"))])])]),e._v(" "),n("div",{staticClass:"form-group"},[n("label",[e._v("Total")]),e._v(" "),n("div",[n("b",[e._v("$\n                        "+e._s(e.users.rate?e.users.qty?e.users.qty*e.users.rate:e.users.rate:"00"))])])])])])])]),e._v(" "),n("button",{staticClass:"btn btn-primary",on:{click:function(t){return t.preventDefault(),e.create.apply(null,arguments)}}},[e._v("\n            Save invoice\n          ")])])])])])])}),[],!1,null,"3d5631ac",null).exports}}]);